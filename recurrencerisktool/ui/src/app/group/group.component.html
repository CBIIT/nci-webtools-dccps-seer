<div fxLayout="row" fxLayout.xs="column">
     <mat-card class="card-form mat-elevation-z10">
       <mat-card-header></mat-card-header>
       <mat-card-content>
         <form [formGroup]="groupDataForm" (ngSubmit)="onSubmit()" fxLayout="column" fxLayoutGap="1vh" >
           <span class="form-label">SEER*Stat Dic File:</span>
           <div fxLayout="row">
             <td-file-input class="browse-button" #dicFileInput formControlName="seerDictionaryFile" accept=".dic" required>
               <mat-icon>folder</mat-icon>
               <span>Browse...</span>
             </td-file-input>
              <mat-form-field appearance="legacy" floatLabel="never" tdFileDrop
                           (fileDrop)="groupDataForm.value.seerDictionaryFile = $event"
                           (click)="dicFileInput.inputElement.click()"
                           (keyup.enter)="dicFileInput.inputElement.click()"
                           (keyup.delete)="dicFileInput.clear()"
                           (keyup.backspace)="dicFileInput.clear()">
               <input matInput placeholder="Select file" [value]="groupDataForm?.value?.seerDictionaryFile?.name ? groupDataForm?.value?.seerDictionaryFile?.name : '' " readonly/>
             </mat-form-field>

           </div>

           <span class="form-label">SEER*Stat Data File:</span>
           <div fxLayout="row" >
             <td-file-input class="browse-button" #dataFileInput formControlName="seerDataFile" accept=".txt" required>
               <mat-icon>folder</mat-icon>
               <span>Browse...</span>
             </td-file-input>
             <mat-form-field appearance="legacy" floatLabel="never" tdFileDrop
                             (fileDrop)="groupDataForm.value.seerDataFile = $event"
                             (click)="dataFileInput.inputElement.click()"
                             (keyup.enter)="dataFileInput.inputElement.click()"
                             (keyup.delete)="dataFileInput.clear()"
                             (keyup.backspace)="dataFileInput.clear()">
               <input matInput placeholder="Select file" [value]="groupDataForm?.value?.seerDataFile?.name ? groupDataForm?.value?.seerDataFile?.name : '' " readonly/>
             </mat-form-field>
           </div>

           <span class="form-label">CanSurv CSV File:</span>
             <div fxLayout="row">
               <td-file-input class="browse-button" #canSurvFileInput formControlName="canSurvDataFile" accept=".csv" required>
                 <mat-icon>folder</mat-icon>
                 <span>Browse...</span>
               </td-file-input>
               <mat-form-field appearance="legacy" floatLabel="never" tdFileDrop
                               (fileDrop)="groupDataForm.value.canSurvDataFile = $event"
                               (click)="canSurvFileInput.inputElement.click()"
                               (keyup.enter)="canSurvFileInput.inputElement.click()"
                               (keyup.delete)="canSurvFileInput.clear()"
                               (keyup.backspace)="canSurvFileInput.clear()">
                 <input matInput placeholder="Select file" [value]="groupDataForm?.value?.canSurvDataFile?.name ? groupDataForm?.value?.canSurvDataFile?.name : '' " readonly/>
               </mat-form-field>
           </div>

           <span class="form-label">Stage Variable:</span>
           <mat-form-field appearance="legacy">
               <mat-select formControlName="stageVariable" required>
                 <mat-option *ngFor="let stageVar of stageVariables" [value]="stageVar">
                   {{stageVar}}
                 </mat-option>
               </mat-select>
           </mat-form-field>

           <span class="form-label">Distant Stage Value:</span>
           <mat-form-field appearance="legacy">
             <mat-select formControlName="stageValue" required>
               <mat-option *ngFor="let stageVal of distantStageValues" [value]="stageVal">
                 {{stageVal}}
               </mat-option>
             </mat-select>
           </mat-form-field>

           <span class="form-label">Adjustment Factor r:</span>
           <mat-form-field  appearance="legacy">
             <input matInput type="number" formControlName="adjustmentFactor" value="1" min="1" max="2" step="0.05">
           </mat-form-field>

           <span class="form-label">Years of Follow-up:</span>
           <mat-slider formControlName="yearsOfFollowUp" color="accent"
              [max]="followup.max"
              [min]="followup.min"
              [step]="followup.step"
              [tickInterval]="followup.interval"
              thumbLabel>
           </mat-slider>
           <span>
             <button mat-raised-button>Submit</button>
           </span>
           <div><mat-divider></mat-divider></div>
           <span><button type="button" (click)="onSubmit(true)" mat-raised-button>
             <mat-icon>file_download</mat-icon>Download results</button>
           </span>
         </form>
       </mat-card-content>
     </mat-card>

     <mat-card class="card-result mat-elevation-z10" fxFlex="1 1 calc(35%)" fxFlex.xs="1 1 auto">
       <mat-card-content>
         <mat-tab-group>
           <mat-tab label="Output">
             <mat-form-field appearance="standard" fxLayout="row" fxLayoutAlign="start stretch">
               <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search Filter">
             </mat-form-field>
             <div class="table-container">
               <table mat-table matSort [dataSource]="dataSource" class="mat-elevation-z8">
                 <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns">
                   <th mat-header-cell *matHeaderCellDef mat-sort-header> <b>{{column}}</b> </th>
                   <td mat-cell *matCellDef="let element">
                     {{ isNumber(element[column]) ?
                         ( unboxNumber(element[column]) | number:'1.1-9' ) : element[column]  }} </td>
                 </ng-container>

                 <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
                 <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
               </table>
             </div>
             <mat-paginator #paginator [pageSizeOptions]="[10, 15, 20]"></mat-paginator>
             <div *ngIf="isGroupDataLoading">
               <mat-progress-bar mode="indeterminate"></mat-progress-bar>
             </div>
           </mat-tab>
           <mat-tab label="Help">
             <rrt-help></rrt-help>
           </mat-tab>
         </mat-tab-group>
       </mat-card-content>
     </mat-card>
</div>
